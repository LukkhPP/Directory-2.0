<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="/webICON.svg">
    <title>PIMD</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-bold-rounded/css/uicons-bold-rounded.css'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/3ed0c6c00c.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="container.css">
    <link rel="stylesheet" href="style.css">

    <style>
      
      body {
        display: flex;
        flex-direction: column;
      }

      body, html {
        margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden; /* Prevent scrollbars */
      }

      /* Loading screen overlay */
      body::after {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(234, 245, 255, 0.94);
            backdrop-filter: blur(5px);
            z-index: 9998;
            transition: 0.18s ease-in-out;
        }

        /* Spinner styling */
        body::before {
            content: "";
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 5rem;
            height: 5rem;
            border: 0.6rem solid rgba(24, 118, 214, 0.4);
            border-top-color: rgb(24, 118, 214);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 9999;
        }

        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Hide loading screen when class is removed */
        body.loaded::after,
        body.loaded::before {
          transition: 0.18s ease-in-out;
            content: none;
            display: none;
        }

      #content {
        flex-grow: 1;
        min-height: 100vh;
      }

      #container3D {
      width: calc(100vw - 90px); /* Default width with sidebar */
      height: calc(100vh - 72px); /* Adjust for navbar */
  }

  @media (max-width: 768px) { /* Mobile View */
      #container3D {
          width: 100vw !important; /* Full width on mobile */
      }
  }

      #logos {
        position: absolute;
        bottom: 0;
        right: 0;
        /* Align to the right side */
        display: flex;
        flex-direction: row;
        /* Arrange images in a row */
        align-items: center;
        /* Vertically center images within the row */
        padding: 10px;
        /* Optional: Add some padding for spacing */
        margin: 10px;
        overflow: hidden;
        pointer-events: none;
        user-select: none;
      }

      #OFCimg {
        background-color: rgba(106, 144, 226, 0.205);
        padding: 10px;
      }

      #logos img {
        width: 80px;
        /* Set image width (adjust as needed) */
        margin-left: 10px;
        /* Add spacing between images */
        overflow: hidden;
        filter: drop-shadow(0px 0px 4px #1876D6);
        pointer-events: none;
      }

      #logos img:first-child {
        margin-left: 0;
        /* Remove margin for the first image */
        pointer-events: none;
        overflow: hidden;
      }

      #btnoffCNS:hover {
        cursor: pointer;
      }

      #btnoffCNS:active {
        transform: scale(0.95);
        filter: grayscale();
      }

      .responsive-iframe {
        max-width: 350px;
        max-height: 350px;
        margin: 30px;
        border: none;
      }

      #help_Bubble:active {
       filter: grayscale();
      }

      .weeel-active2 {
         background-image: linear-gradient(to right, #2C2D3F 0%, #2C2D3F 51%, #2C2D3F 100%);
         
      }

      
    </style>

<style> /*Help Button*/
.modal-content {
            border-radius: 10px;
        }
        .dot {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            background-color: #ccc;
            display: inline-block;
            margin: 0 5px;
        }
        .active {
            background-color: #1962ff;
        }

  .icon {
  display: inherit;
  flex-shrink: 0; /* Prevent shrinking in flex containers */
  place-items: center;
  width: 63px !important;
  height: 63px !important;
  background-color: rgb(255, 255, 255);
  /* Icon color */
  -webkit-mask-image: url('public/Robotsvg1.svg');
  mask-image: url('public/Robotsvg1.svg');
  -webkit-mask-size: cover; /* Ensures mask scales properly */
  mask-size: cover;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
}



</style>

  </head>

  <body>
    <!-- Main content -->
    <div id="content" class="d-flex flex-column flex-grow-1">

      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg border-bottom shadow-sm">
        <div class="container-fluid">
          <button class="btn btn-primary px-2 py-0 d-md-none bg-white " style="bottom: 15px;" onclick="toggleSideBar()">
            <i class="bi bi-arrows fs-2" style="color: rgb(28, 78, 185)"></i>
          </button>

          <h1 class="navyG" style="user-select: none;" href="#">PIMD</h1>

          <button class="navbar-toggler bg-white py-2" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false"
            aria-label="Toggle navigation">
            <i class="fa fa-bars" style="color: rgb(28, 78, 185)"></i>
          </button>

          <div class="collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item">
                <a class="nav-link" style="user-select: none;" href="/others/About.html">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" style="user-select: none;" href="/others/Contact.html">Contact</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <div class="d-flex flex-grow-1">
        <!-- Sidebar -->
        <nav id="sidebar" class="sidebar border-end p-3 d-none d-md-flex">
          <ul class="nav d-flex flex-column align-items-center justify-content-end gap-3 my-3">

            <!-- Dropend -->
            <div class="dropend">
            <li class="nav-item rounded-3" data-toggle="tooltip" data-placement="right" title="PIMD Hub" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-box-seam-fill fs-1 p-2 bg-white rounded-3 d-flex align-items-center"
                style="color: rgb(24, 118, 214);" id="weee"></i>
            </li>

            <ul class="dropdown-menu mx-4 row flex flex-row align-items-center justify-content-center border-3 border-primary p-2 mb-2 shadow">
              <div class="col-6 d-flex mb-2 justify-content-center w-100 gap-2 position-absolute" style="padding-left: 8px; top: 20px; inset: 0; margin: auto; bottom: 130px; top: -34px;">
                <p class="hubApp fs-4" style="pointer-events: none; user-select: none;">HUB</p>
              </div>

              <div class="col-6 d-flex mb-2 justify-content-center w-100 gap-2" style="padding-left: 8px;">
                <li class="nav-item rounded-3 m-2 " data-toggle="tooltip" data-placement="right" title="Fire Extinguishers" style="width: 50px; height: 50px; padding: 0; display: flex; align-items: center; justify-content: center;">
                  <i class="fa-solid fa-fire-extinguisher fs-1 p-2 weeel-active rounded-3 d-flex align-items-center"
                    style="color: rgb(255, 255, 255);" id="weeel"></i>
                </li>
                <li class="nav-item rounded-3 m-2 " data-toggle="tooltip" data-placement="right" title="Fire Exit" style="width: 50px; height: 50px; padding: 0; display: flex; align-items: center; justify-content: center;">
                  <i class="fa-solid fa-door-open fs-1 p-2 wat-active rounded-3 d-flex align-items-center"
                    style="color: rgb(255, 255, 255);" id="whut"></i>
                </li>
              </div>
              <div class="col-6 d-flex mb-2 justify-content-center w-100 gap-2" style="padding-left: 8px;">
                <li class="nav-item rounded-3 m-2 g" data-toggle="tooltip" data-placement="right" title="Fire Extinguishers" style="width: 50px; height: 50px; padding: 0; display: flex; align-items: center; justify-content: center;">
                  <i class="fs-1 p-2 weeel-active rounded-3 d-flex align-items-center"
                    style="color: rgb(255, 255, 255);" id="weeel"></i>
                </li>
                <li class="nav-item rounded-3 m-2" data-toggle="tooltip" data-placement="right" title="Fire Exit" style="width: 50px; height: 50px; padding: 0; display: flex; align-items: center; justify-content: center;">
                  <i class="fs-2 p-2 wat-active rounded-3 d-flex align-items-center"
                    style="color: rgb(255, 255, 255);" id="whut"></i>
                </li>
              </div>
            </ul>
            
          </div>

          

           <!-- Department Button -->
            <li class="nav-item rounded-3" data-toggle="tooltip" data-placement="right" title="Departments/Offices">
              <i class="bi bi-geo-alt-fill fs-1 p-2 bg-white rounded-3 d-flex align-items-center" type="button"
                data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"
                style="color: rgb(24, 118, 214);" id="weee"></i>
            </li>
            
            <!-- 2d  -->

            <li class="nav-item rounded-3" data-toggle="tooltip" data-placement="right" title="Switch to 2D">
              <a href="html.html" class="d-flex align-items-center text-decoration-none">
                <i class="custom-icon px-1 p-1 bg-white rounded-3" style=" color: rgb(24, 118, 214);" id="weee">
                  <svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="49" height="49">
                    <style>
                      .s0 { fill: #1876d6 } 
                    </style>
                    <g>
                      <path id="Shape 1" fill-rule="evenodd" class="s0" d="m255.6 44c192.4 0 193.6 0 201.2 1.9 4.2 1.1 10.2 3.4 13.3 5.1 3.2 1.7 8.8 6.1 12.5 9.8 3.7 3.8 8.1 9.2 9.7 12.1 1.6 2.9 3.9 8.1 7.4 17.8l0.2 123.7c0.2 106.3 0.1 124.6-1.2 130.6-0.7 3.9-2.9 10.3-4.9 14.3-2.5 5.3-5.3 9.1-10.7 14.4-4 4-9.8 8.6-13 10.3-3.1 1.7-9.1 4-13.3 5.1-7.4 1.9-9.9 2-181.6 2v38.5h99.1v38.6h-236.4v-38.6h99.1v-38.5h-87c-84.7 0-87.2-0.1-94.6-2-4.2-1.1-10.2-3.4-13.4-5-3.2-1.8-8.8-6.2-12.9-10.4-5.3-5.3-8.2-9.1-10.8-14.4-1.9-4-4.1-10.3-4.9-14-1.2-5.8-1.4-25.2-1.4-128.3 0-119.5 0-121.6 1.9-129.2 1.1-4.2 3.4-10.3 5-13.5 1.8-3.3 6.1-8.8 10.2-13 4.2-4.2 9.6-8.6 12.9-10.3 3.2-1.7 9-3.9 12.9-5 7-1.9 10.7-1.9 200.7-2zm-192.6 39.6c-1.6 0.5-4.1 1.9-5.7 3.1-1.6 1.2-3.8 4.2-5 6.5l-2.2 4.3 0.5 242c3.7 5.9 6.5 8.7 8.5 10l3.8 2.5h386.3c6.5-4.5 9.3-7.5 10.4-9.6 1.9-3.9 2-4.3 2.2-123.9l0.2-120.1c-4-8.5-6-10.9-8.8-12.7l-4-2.7c-308.6-0.2-384.4 0-386.2 0.6zm145.9 67.7c10.3 0.3 13.3 0.7 18.1 2.6 3.1 1.3 7.8 4 10.3 6 2.4 2 5.5 5.5 6.8 7.7 1.3 2.3 3.1 6.5 4 9.4 1.1 3.7 1.4 7.8 1.2 13.5-0.3 6.8-0.9 9.3-3.4 14.5-2 4.2-4.9 8.1-9 12-4.8 4.6-8.9 7.2-19 12.2-8.8 4.4-13.8 7.4-15.9 9.9-1.7 1.9-3.6 4.6-4.1 5.9-0.5 1.3-0.9 4.6-0.9 12.1l22.8 0.2c21.3 0.2 23 0.4 25.5 2.2 1.5 1.1 3.5 3.7 4.5 5.8 1.3 2.8 1.6 4.7 1 7.2-0.4 1.9-1.9 4.5-3.6 6-1.8 1.6-5 3.1-7.6 3.6-2.5 0.6-17.2 1-32.6 1-24.8 0-28.6-0.2-31.6-1.7-1.9-0.9-4.4-3-5.5-4.6-1.9-2.6-2-4.2-2-35.7l3.1-6.2c1.6-3.5 5.1-8.4 7.6-11 2.5-2.6 6.7-6.2 9.3-7.9 2.6-1.8 8.4-4.8 12.9-6.8 4.4-1.9 9.6-4.5 11.4-5.7 1.9-1.2 4.6-3.5 6.2-5.2 1.7-1.8 3.1-4.6 3.4-6.7 0.3-1.9 0.2-5.2-0.2-7.3-0.4-2.2-1.7-4.9-2.9-6.1-1.2-1.2-3.7-2.6-5.5-3.1-1.9-0.5-4.8-1-6.5-1-1.7 0-4.6 0.7-6.4 1.5-1.8 0.8-4 2.4-4.7 3.6-0.8 1.2-1.8 5.2-2.4 8.9-0.8 5.9-1.3 7.1-4.3 9.9q-3.4 3.1-7.4 3.7c-3 0.5-5.2 0.1-8.6-1.4-3.1-1.4-5-3.1-6.1-5.2-1.1-2.3-1.4-4.8-1.1-9.4 0.3-4.3 1.4-8.3 3.5-13 1.7-3.7 4.7-8.4 6.6-10.5 1.9-2 5.7-4.8 8.3-6.1 2.6-1.4 6.5-3.1 8.6-3.8 2.6-0.9 7.7-1.2 16.2-1zm90.1 0.1c17 0.2 20.3 0.6 25.7 2.4 3.4 1.1 8.4 3.7 11 5.7 2.6 2 6.2 5.8 7.9 8.4 1.7 2.6 3.5 7 4 9.6 0.7 3 0.9 18.4 0.8 41-0.3 34.6-0.4 36.4-2.4 41.4-1.2 3-3.5 7.1-5.1 9.2-1.7 2.1-5 5.3-7.4 7-2.5 1.8-6.6 3.9-9.2 4.8-4 1.4-8.5 1.7-27.4 1.7-21.2 0-22.6-0.1-24.6-1.9-1.2-1.1-2.8-3.4-3.5-5.1-1-2.5-1.3-14-1.3-58.6 0-50.8 0.2-55.7 1.7-58.9 0.9-1.9 2.5-4 3.6-4.5 1-0.5 2.9-1.3 4.3-1.8 1.3-0.4 11.1-0.6 21.9-0.4zm-3.8 110c12.8-0.9 17.1-1.8 19.4-3 2.3-1.1 4.5-3.2 5.5-5.2 1.6-3.1 1.8-6.2 1.8-34.7 0-17.2-0.5-32.9-1-34.7-0.5-1.9-2.1-4.6-3.5-6-1.5-1.4-4.4-3-6.5-3.6-2.1-0.5-6.5-1-9.8-1h-5.9z"/>
                    </g>
                  </svg>
                </i>
              </a>
            </li>

            <!-- qr -->
            <li class="nav-item rounded-3" data-toggle="tooltip" data-placement="right" title="Fire Extinguishers">
              <i class="bi bi-qr-code-scan fs-1 p-2 bg-white rounded-3 d-flex align-items-center"
                style="color: rgb(24, 118, 214);" id="weee"></i>
            </li>
            
          </ul>
        </nav>


        <!-- Modal -->
        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
          aria-labelledby="staticBackdropLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">Modal Title</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body d-flex flex-row align-items-center">
                <iframe src="" class="responsive-iframe me-4 rounded-3" id="OFCimg" width="250" height="250"></iframe>
                <p class="w-100 mb-0 ms-3 me-4 text-wrap">
                  INFO ABOUT THIS DEPARTMENT: da dad da dadra fdsf a dsdf fa fsfs fsfsf fgdf sdfs dd fdfdf sdsaad ggdg
                  sa
                </p>
              </div>
            </div>
          </div>
        </div>


        <!-- Offcanvas Right -->
        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasRightLabel">Departments/Offices</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <div class="d-flex" role="search">
              <input class="form-control me-2" id="searchBar" type="text" placeholder="Search" aria-label="Search">
            </div>
            <div class="d-flex flex-column py-3" id="buttonContainer">

            </div>
          </div>
        </div>

        <!-- Content Container -->


        <div class="container-fluid border-end d-flex align-items-center justify-content-center text-center position-relative" 
     id="container3D" 
     style="padding: 0px;">
          <button id="help_Bubble" class="shadow position-absolute btn text-white d-flex align-items-center rounded-circle justify-content-center" style="overflow: hidden; width: 80px; height: 80px; cursor: grab; z-index: 2; left: 95%; top: 1%; background-color: rgb(24, 118, 214); transition: filter 0.5s ease;">
            <i class="icon"></i>
          </button>
            
        </div>
      </div>

       <!-- help Modal -->
  <div class="modal fade" id="help_Backdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true"  style=" backdrop-filter: blur(5px); transition: 0.18s ease-in-out;">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" >
        <div class="modal-content" style="overflow: visible !important; ">
            <div class="modal-header" style="position: relative; display: flex; align-items: center; justify-content: space-between;">
                <img src="./public/Bye.gif" id="Byelogo" alt="PSDN Logo" style=" width: 200px; height: 200px; position: absolute; inset: 0; margin: auto; bottom: 130px; top: -18px; z-index: -1;">
                <div class="shadow-lg position-absolute text-white d-flex align-items-center rounded-circle justify-content-center " style="width: 120px; height: 120px; position: absolute; inset: 0; margin: auto; bottom: 40px; top: -10px; z-index: -2; background-color: rgb(24, 118, 214);"></div>
                <h1 class="modal-title fs-5" id="staticBackdropLabel" style="position: absolute; left: 50%; transform: translateX(-50%); white-space: nowrap;">Guide</h1>

                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">

                </button>
            </div>
            <div class="modal-body">
                <div id="slide1">
                    <p>Here are a few tips to get familiar with our platform.</p>
                </div>
                <div id="slide2" style="display: none;">
                    <p>Slide 2 content</p>
                </div>
                <div id="slide3" style="display: none;">
                    <p>Slide 3 content</p>
                </div>
                <div class="dot-container">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>

                <button type="button" class="btn btn-primary" id="prevBtn" disabled><i class="bi bi-caret-left-fill "></i></button>
                <button type="button" class="btn btn-primary" id="nextBtn"><i class="bi bi-caret-right-fill "></i></button>
            </div>         
            </div>
        </div>
    </div>
</div>


      <!-- sidebar toggle button -->

    </div>
    <div id="logos">
      <img src="./public/PSDN.png" id="PSDNlogo" alt="PSDN Logo">
      <img src="./public/Photo/Picto.png" id="Pictologo" alt="Picto Logo">
    </div>

    

    <!-- scripts -->
    <script type="importmap">
    {
        "imports": {
            "three": "./node_modules/three/build/three.module.js",
            "three/addons/": "./node_modules/three/examples/jsm/",
            "three/zMath/": "./node_modules/three/src/math/",
            "three-pathfinding": "./node_modules/three-pathfinding/dist/three-pathfinding.module.js",
            "gsap": "./node_modules/gsap/index.js"
        }
    }
  </script>

    <script>
      document.getElementById("weeel").addEventListener("click", function () {
        this.classList.toggle("weeel-active2");
        this.classList.toggle("weeel-active");

        setTimeout(() => {
          const sound = new Audio('/public/LocationPin.mp3'); // Replace with your actual sound file path
          sound.volume = 0.2; // Adjust volume (0.0 to 1.0)
          sound.play();
        }, 200);

      });

      document.getElementById("whut").addEventListener("click", function () {
        this.classList.toggle("weeel-active2");
        this.classList.toggle("wat-active");

        setTimeout(() => {
          const sound = new Audio('/public/LocationPin.mp3'); // Replace with your actual sound file path
          sound.volume = 0.2; // Adjust volume (0.0 to 1.0)
          sound.play();
        }, 200);


      });

      document.querySelectorAll('[id="weee"]').forEach(element => {
        element.addEventListener("click", function () {
        const sound = new Audio('/public/LocationPin.mp3'); // Replace with your actual sound file path
        sound.volume = 0.2; // Adjust volume (0.0 to 1.0)
        sound.play();
    });
        
                
});

document.querySelectorAll('[class="btn-close"]').forEach(element => {
        element.addEventListener("click", function () {
          const sound = new Audio('/public/Close.mp3'); 
                  sound.volume = 0.1; 
                  sound.play();
    });  });


      function adjustContainer() {
    const navbarHeight = document.querySelector(".navbar").offsetHeight; 
    const sidebar = document.querySelector(".sidebar");
    const container = document.getElementById("container3D");  

    const sidebarWidth = window.innerWidth > 768 ? sidebar.offsetWidth : 0; // Hide sidebar on mobile

    container.style.width = `calc(100vw - ${sidebarWidth}px)`;
    container.style.height = `calc(100vh - ${navbarHeight}px)`;
}


window.addEventListener("resize", adjustContainer);
window.addEventListener("load", adjustContainer);

    </script>


    <script type="module" src="/main.js"></script>
    <script type="module" src="/buttonfunc.js"></script>



    <script>

      const bubble = document.getElementById("help_Bubble");
  const container = bubble.parentElement;
  
  let isDragging = false;
  let initialX, initialY, startX, startY;
  let isClick = true;
  
  // Start dragging
  function startDrag(e) {
    e.preventDefault();
    isDragging = true;
    isClick = true; // Assume it's a click initially
    initialX = bubble.offsetLeft;
    initialY = bubble.offsetTop;
    startX = e.touches ? e.touches[0].clientX : e.clientX;
    startY = e.touches ? e.touches[0].clientY : e.clientY;
    bubble.style.cursor = "grabbing";
  
    // Disable transitions during dragging
    bubble.style.transition = "none";
  }
  let lastTrailX = 0;
let lastTrailY = 0;
const trailGap = 0.02; // Minimum distance before creating a new trail

function createTrail(x, y) {
  const trail = document.createElement("div");
  trail.classList.add("trail");

  // Match bubble size
  const size = bubble.clientWidth;
  trail.style.width = `${size}px`;
  trail.style.height = `${size}px`;


  trail.style.left = `${x}px`;
  trail.style.top = `${y}px`;
  container.appendChild(trail);

  // Force reflow to register the initial size before shrinking
  void trail.offsetWidth; 


  trail.classList.add("shrink");
  setTimeout(() => trail.remove(), 500);
}

// Dragging the button
function drag(e) {
  if (!isDragging) return;

  const sound = new Audio('/public/Grab.mp3'); 
  sound.volume = 0.1; 
  sound.play();

  const currentX = e.touches ? e.touches[0].clientX : e.clientX;
  const currentY = e.touches ? e.touches[0].clientY : e.clientY;

  const deltaX = currentX - startX;
  const deltaY = currentY - startY;

  if (Math.abs(deltaX) > 5 || Math.abs(deltaY) > 5) {
    isClick = false;
  }

  const newX = initialX + deltaX;
  const newY = initialY + deltaY;

  const x = Math.max(0, Math.min(newX, container.clientWidth - bubble.clientWidth));
  const y = Math.max(0, Math.min(newY, container.clientHeight - bubble.clientHeight));

  bubble.style.left = `${x}px`;
  bubble.style.top = `${y}px`;

  // Only create trail if the bubble moved at least `trailGap` pixels
  if (Math.abs(x - lastTrailX) > trailGap || Math.abs(y - lastTrailY) > trailGap) {
    createTrail(x + bubble.clientWidth / 2, y + bubble.clientHeight / 2);
    lastTrailX = x;
    lastTrailY = y;
  }
}

const style = document.createElement("style");
style.innerHTML = `
  .trail {
    position: absolute;
    background-color: rgba(24, 118, 214, 0.5);
    border-radius: 50%;
    pointer-events: none;
    box-shadow: 0 0 6px rgba(24, 118, 214, 0.4);
    transform: translate(-50%, -50%) scale(1); /* Position correctly but keep full size */
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
    z-index: 1;
  }

  .trail.shrink {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0); /* Shrinks smoothly */
  }
`;
document.head.appendChild(style);

  
  // End dragging
  function endDrag(e) {
    if (!isDragging) return;

    const sound = new Audio('/public/EndGrab.mp3'); 
    sound.volume = 0.1; 
    sound.play();
  
    isDragging = false;
    bubble.style.cursor = "grab";
  
    // Re-enable transitions for smooth snapping
    bubble.style.transition = "top 0.5s ease, left 0.5s ease";
  
    // Magnetic effect: snap to the closest edge of the container
    const bubbleRect = bubble.getBoundingClientRect();
    const containerRect = container.getBoundingClientRect();
  
    const distances = {
      top: bubbleRect.top - containerRect.top,
      bottom: containerRect.bottom - bubbleRect.bottom,
      left: bubbleRect.left - containerRect.left,
      right: containerRect.right - bubbleRect.right,
    };
  
    // Find the closest edge
    const closestEdge = Object.keys(distances).reduce((a, b) => distances[a] < distances[b] ? a : b);
  
    switch (closestEdge) {
      case "top":
        bubble.style.top = "0px";
        break;
      case "bottom":
        bubble.style.top = `${container.clientHeight - bubble.clientHeight}px`;
        break;
      case "left":
        bubble.style.left = "0px";
        break;
      case "right":
        bubble.style.left = `${container.clientWidth - bubble.clientWidth}px`;
        break;
    }
  
    // If it was a click, open the modal
    if (isClick) {
      bubble.style.cursor = 'pointer';
      bubble.style.filter = 'grayscale(100%)';

      // Play sound 
    const sound = new Audio('/public/Pop.mp3'); 
    sound.volume = 0.5; 
    sound.play();

      // After 0.5 seconds, remove the grayscale filter
      setTimeout(function() {
    bubble.style.filter = 'grayscale(0%)';
    bubble.style.cursor = 'grab'
    const modal = new bootstrap.Modal(document.getElementById("help_Backdrop"));
    modal.show();
  }, 200);  // 500ms = 0.5 seconds

    }
  }
  
  // Event listeners for mouse and touch events
  bubble.addEventListener("mousedown", startDrag);
  document.addEventListener("mousemove", drag);
  document.addEventListener("mouseup", endDrag);
  
  bubble.addEventListener("touchstart", startDrag);
  document.addEventListener("touchmove", drag);
  document.addEventListener("touchend", endDrag);
  
    </script>

<script>
  const slides = document.querySelectorAll('.modal-body > div');
  const dots = document.querySelectorAll('.dot');
  const modal = document.getElementById("help_Backdrop");
  let currentSlide = 0, limit = 2; //set limit depending on the amount of dots, if dot classlist is 3 then set limit to 2 for the arrays starts at 0;

  const nextBtn = document.getElementById('nextBtn');
  const prevBtn = document.getElementById('prevBtn');

  nextBtn.addEventListener('click', () => {
    const sound = new Audio('/public/button.mp3'); // Adjust path based on your folder structure
    sound.volume = 0.2; // Set volume (0.0 to 1.0)
    sound.play();

      slides[currentSlide].style.display = 'none';
      currentSlide = (currentSlide + 1) % (limit + 1);
      slides[currentSlide].style.display = 'block';

      if (currentSlide <= 3){
      updateDots();
      updateButtons();} else {}
  });

  prevBtn.addEventListener('click', () => {
    const sound = new Audio('/public/button.mp3'); // Adjust path based on your folder structure
    sound.volume = 0.2; // Set volume (0.0 to 1.0)
    sound.play();

      slides[currentSlide].style.display = 'none';
      currentSlide = (currentSlide - 1 + slides.length) % (limit);
      slides[currentSlide].style.display = 'block';

      updateDots();
      updateButtons();
  });

  function updateDots() {
    function wait(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
      }

    if (currentSlide <=limit) {
      dots.forEach((dot, index) => {
          dot.classList.remove('active');
      });
    } else { currentSlide = 0; dots[limit].classList.remove('active');}
      dots[currentSlide].classList.add('active');
  }

  function updateButtons() {
      prevBtn.disabled = currentSlide === 0;
      
      nextBtn.disabled = currentSlide === (limit + 1) - 1;
  }

  updateDots();
  updateButtons();
</script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"></script>
    <script>
      function toggleSideBar() {
        sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('d-none');
      }
    </script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
  const navbarBrand = document.querySelector(".navyG");

  // Define the hover behavior
  navbarBrand.addEventListener("mouseenter", () => {
    navbarBrand.textContent = "Provincial Interactive Mapping Directory"; // Change text on hover
    const sound = new Audio('/public/HoverStart.wav');
          sound.volume = 0.3; 
          sound.play();
    
  });

  navbarBrand.addEventListener("mouseleave", () => {
    navbarBrand.textContent = "PIMD"; 
    const sound = new Audio('/public/HoverOver.wav');
          sound.volume = 0.3; 
          sound.play();
    
  });
});
</script>


  </body>

</html>